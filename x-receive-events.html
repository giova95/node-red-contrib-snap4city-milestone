<script type="text/javascript">
    RED.nodes.registerType('xreceive-events', {
        category: 'S4CXprotect',
        color: '#fde910',
        icon: 'icons/logocam.png',
        inputs: 1,
        outputs: 1,
        label: function () {
            return this.name || 'Receive Events From XProtect';
        },
        defaults: {
            name: { type: "text" },
            guid: { type: "text" },
            hostname: { type: 'text' },
            port: { type: "text" },
        }
    });
</script>

<script type="text/html" data-template-name="xreceive-events">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-guid"><i class="fa fa-tag"></i> Guid </label>
        <input type="text" id="node-input-guid" placeholder="GUID">
    </div>
    <div class="form-row">
        <label for="node-input-hostname"><i class="fa fa-tag"></i> Hostname</label>
        <input type="text" id="node-input-hostname" placeholder="Hostname">
    </div>
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-tag"></i> Port</label>
        <input type="text" id="node-input-port" placeholder="Port">
    </div>
</script>

<script type="text/x-red" data-help-name="xreceive-events">
    <p>With this node you can receive events from Milestone VMS through the event server</p>
    
    <h3>Inputs</h3>
    <p>A JSON with these parameters:</p>
    
    <dl class="message-properties">
        <dt>Timer
            <span class="property-type">string</span>
        </dt>
        <dd>A timer indicating how often to request new events.</dd>

        <dt>Order
            <span class="property-type">string</span>
        </dt>
        <dd>The sorting type for the alarms.(Basically descending/ascending).</dd>
        
        <dt>Target
             <span class="property-type">string</span>
        </dt>
        <dd>The target property of the sorting for the alarms. They're displayed with a drop-down menu</dd>
    </dl>

    <h3>Outputs</h3>
     <dl class="message-properties">
         <dd>A JSON file containing a list of newly arrived events received from the event server with information about them.</dd>
     </dl>
     
    <h3>Details</h3>
     <p>The node can receive the parameters described in the Inputs section and with them generate the output JSON. If the values are not present in the input JSON, 
        these are read by those in the node properties. If they are not present in either part or are wrong, an error is generated for the necessary parameters 
        or the reason why are not correct. Note that real time is simulated by making timed requests to the event server and checking the events state</p>
</script>